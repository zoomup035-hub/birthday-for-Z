<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Biometric Verification | Birthday Quest</title>
    <link rel="icon" href="data:;base64,iVBORw0KGgo=">
    <script src="https://cdnjs.cloudflare.com/ajax/libs/three.js/r128/three.min.js"></script>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
            font-family: 'Consolas', 'Courier New', monospace;
        }

        body {
            display: flex;
            justify-content: center;
            align-items: center;
            min-height: 100vh;
            background: #0d100e;
            color: #3fefef;
            overflow: hidden;
        }

        /* ----- TERMINAL HACKING SEQUENCE STYLES ----- */
        #terminal-section {
            width: 100%;
            height: 100vh;
            display: flex;
            justify-content: center;
            align-items: center;
            background: linear-gradient(to bottom, #0a0a0a, #0f0f0f);
            transition: opacity 1s ease;
        }

        .terminal-container {
            width: 90%;
            max-width: 800px;
            padding: 30px;
            background-color: rgba(20, 20, 20, 0.8);
            border: 2px solid rgba(0, 255, 0, 0.5);
            border-radius: 5px;
            box-shadow:
                0 0 20px rgba(0, 255, 0, 0.2),
                inset 0 0 20px rgba(0, 0, 0, 0.5);
        }

        .terminal-output {
            font-size: 0.95rem;
            line-height: 1.6;
            color: #00ff00;
            text-shadow: 0 0 5px rgba(0, 255, 0, 0.3);
            word-wrap: break-word;
            white-space: pre-wrap;
            min-height: 150px;
        }

        .terminal-line {
            margin-bottom: 8px;
            animation: fadeIn 0.3s ease-in;
        }

        @keyframes fadeIn {
            from {
                opacity: 0;
                transform: translateY(-5px);
            }

            to {
                opacity: 1;
                transform: translateY(0);
            }
        }

        /* Cursor / Blinking effect */
        .terminal-cursor {
            display: inline-block;
            width: 10px;
            height: 1em;
            background-color: #00ff00;
            margin-left: 3px;
            animation: blink 0.8s infinite;
            vertical-align: middle;
        }

        @keyframes blink {

            0%,
            50% {
                opacity: 1;
            }

            51%,
            100% {
                opacity: 0;
            }
        }

        /* Glitch effect for lines */
        .glitch {
            position: relative;
            display: inline-block;
        }

        .glitch::before,
        .glitch::after {
            content: attr(data-glitch);
            position: absolute;
            left: 0;
            top: 0;
            width: 100%;
            height: 100%;
        }

        .glitch::before {
            animation: glitch-anim 0.3s ease-in-out;
            color: #ff0000;
            z-index: -1;
            text-shadow: -2px 0 #ff00ff;
            opacity: 0.8;
        }

        .glitch::after {
            animation: glitch-anim 0.3s ease-in-out reverse;
            color: #00ffff;
            z-index: -2;
            text-shadow: 2px 0 #00ff00;
            opacity: 0.8;
        }

        @keyframes glitch-anim {
            0% {
                clip-path: inset(0 0 0 0);
            }

            20% {
                clip-path: inset(10% 0 60% 0);
            }

            40% {
                clip-path: inset(50% 0 10% 0);
            }

            60% {
                clip-path: inset(30% 0 30% 0);
            }

            80% {
                clip-path: inset(5% 0 58% 0);
            }

            100% {
                clip-path: inset(0 0 0 0);
            }
        }

        /* ----- SCANNER STYLES ----- */
        #scanner-section {
            display: none;
            flex-direction: column;
            align-items: center;
            opacity: 0;
            transition: opacity 1s ease;
        }

        .scan {
            position: relative;
            display: flex;
            flex-direction: column;
            align-items: center;
            cursor: pointer;
            user-select: none;
            -webkit-user-select: none;
        }

        .scan .fingerprint {
            position: relative;
            width: 300px;
            height: 300px;
            background: url(https://assets.codepen.io/4421919/fingerprint.png);
            background-size: 300px;
            filter: grayscale(1);
            transition: filter 0.5s;
        }

        .scan.scanning .fingerprint {
            filter: grayscale(0);
        }

        .scan .fingerprint::before {
            content: '';
            position: absolute;
            top: 0;
            left: 0;
            width: 100%;
            height: 0%;
            /* Controlled via JS */
            background: url(https://assets.codepen.io/4421919/fingerprint+%281%29.png);
            background-size: 300px;
            display: none;
            pointer-events: none;
        }

        .scan.scanning .fingerprint::before {
            display: block;
        }

        .scan .fingerprint::after {
            content: '';
            position: absolute;
            top: 0;
            /* Controlled via JS */
            left: 0;
            width: 100%;
            height: 8px;
            background: #3fefef;
            border-radius: 8px;
            filter: drop-shadow(0 0 20px #3fefef) drop-shadow(0 0 60px #3fefef);
            display: none;
            pointer-events: none;
        }

        .scan.scanning .fingerprint::after {
            display: block;
        }

        .scan h3 {
            text-transform: uppercase;
            font-size: 2em;
            letter-spacing: 2px;
            margin-top: 20px;
            color: #3fefef;
            filter: drop-shadow(0 0 20px #3fefef) drop-shadow(0 0 60px #3fefef);
            opacity: 0.3;
            transition: opacity 0.3s;
        }

        .scan.scanning h3 {
            opacity: 1;
            animation: animate_text 0.5s steps(1) infinite;
        }

        @keyframes animate_text {

            0%,
            100% {
                opacity: 0;
            }

            50% {
                opacity: 1;
            }
        }

        #status-label {
            margin-top: 30px;
            font-size: 2.5em;
            font-weight: bold;
            text-transform: uppercase;
            letter-spacing: 5px;
            text-shadow: 0 0 10px currentColor;
            display: none;
        }

        .denied {
            color: #ff3e3e !important;
        }

        .granted {
            color: #3eff3e !important;
        }

        #welcome-message {
            margin-top: 20px;
            font-size: 1.5em;
            color: #3eff3e;
            opacity: 0;
            transition: opacity 1s;
        }

        .hint-text {
            margin-top: 15px;
            color: rgba(63, 239, 239, 0.6);
            font-size: 0.9em;
            text-transform: uppercase;
            letter-spacing: 2px;
            transition: opacity 0.3s;
        }

        /* ----- DECRYPTION SECTION ----- */
        #decryption-section {
            position: fixed;
            top: 0;
            left: 0;
            width: 100vw;
            height: 100vh;
            display: none;
            background: #000;
            z-index: 100;
            overflow: hidden;
        }

        #hex-matrix {
            position: absolute;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            z-index: 1;
            opacity: 0.6;
        }

        .decryption-container {
            position: absolute;
            top: 50%;
            left: 50%;
            transform: translate(-50%, -50%);
            width: 90%;
            max-width: 800px;
            z-index: 2;
            text-align: center;
        }

        .encryption-layer {
            position: relative;
            background: rgba(10, 20, 15, 0.8);
            border: 1px solid #3fefef;
            border-radius: 5px;
            padding: 40px 30px;
            margin-bottom: 30px;
            box-shadow: 0 0 30px rgba(63, 239, 239, 0.2);
        }

        .encryption-layer h2 {
            color: #3fefef;
            font-size: 2.5em;
            margin-bottom: 30px;
            text-transform: uppercase;
            letter-spacing: 3px;
            text-shadow: 0 0 10px #3fefef;
        }

        .progress-container {
            width: 100%;
            height: 20px;
            background: rgba(20, 30, 25, 0.7);
            border: 1px solid #3fefef;
            border-radius: 10px;
            overflow: hidden;
            margin: 30px 0;
            position: relative;
        }

        .progress-bar {
            height: 100%;
            width: 0%;
            background: linear-gradient(90deg, #3fefef, #00ffaa);
            box-shadow: 0 0 15px rgba(63, 239, 239, 0.5);
            transition: width 0.3s ease;
        }

        .progress-text {
            position: absolute;
            top: 50%;
            left: 50%;
            transform: translate(-50%, -50%);
            color: #fff;
            font-size: 0.9em;
            letter-spacing: 2px;
        }

        .status-message {
            color: #3fefef;
            font-size: 1.2em;
            margin-top: 20px;
            min-height: 24px;
        }

        .firewall-breaches {
            display: flex;
            justify-content: center;
            gap: 20px;
            margin-top: 30px;
            flex-wrap: wrap;
        }

        .firewall-node {
            width: 60px;
            height: 60px;
            border: 2px solid #ff3e3e;
            border-radius: 50%;
            display: flex;
            align-items: center;
            justify-content: center;
            color: #ff3e3e;
            font-size: 1.5em;
            transition: all 0.3s ease;
            position: relative;
        }

        .firewall-node.active {
            border-color: #3eff3e;
            color: #3eff3e;
            box-shadow: 0 0 20px #3eff3e;
        }

        .firewall-node.active::after {
            content: '‚úì';
            position: absolute;
            top: -10px;
            right: -10px;
            background: #3eff3e;
            color: #000;
            width: 25px;
            height: 25px;
            border-radius: 50%;
            display: flex;
            align-items: center;
            justify-content: center;
            font-weight: bold;
        }

        /* ----- NEURAL SECTION ----- */
        #neural-section {
            position: fixed;
            top: 0;
            left: 0;
            width: 100vw;
            height: 100vh;
            display: none;
            background: #000;
            z-index: 200;
        }

        #neuralCanvas {
            position: absolute;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
        }

        .neural-overlay {
            position: absolute;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            z-index: 2;
            display: flex;
            flex-direction: column;
            justify-content: center;
            align-items: center;
            text-align: center;
            padding: 20px;
            pointer-events: none;
        }

        .neural-title {
            color: #3fefef;
            font-size: 3em;
            text-transform: uppercase;
            letter-spacing: 5px;
            margin-bottom: 40px;
            text-shadow: 0 0 20px #3fefef;
            opacity: 0;
            transform: translateY(30px);
            transition: opacity 1s, transform 1s;
        }

        .neural-title.visible {
            opacity: 1;
            transform: translateY(0);
        }

        .identity-confirmed {
            color: #3eff3e;
            font-size: 2.5em;
            text-transform: uppercase;
            letter-spacing: 3px;
            margin-top: 40px;
            text-shadow: 0 0 15px #3eff3e;
            opacity: 0;
            transition: opacity 1.5s;
        }

        .identity-confirmed.visible {
            opacity: 1;
        }

        .name-display {
            color: #fff;
            font-size: 4em;
            font-weight: bold;
            text-transform: uppercase;
            letter-spacing: 8px;
            margin-top: 20px;
            text-shadow:
                0 0 10px #3fefef,
                0 0 20px #3fefef,
                0 0 40px #3fefef;
            background: linear-gradient(90deg, #3fefef, #00ffaa);
            -webkit-background-clip: text;
            background-clip: text;
            color: transparent;
            opacity: 0;
            transform: scale(0.8);
            transition: opacity 1s, transform 1s;
        }

        .name-display.visible {
            opacity: 1;
            transform: scale(1);
        }

        /* ----- MOBILE RESPONSIVENESS ----- */
        @media (max-width: 600px) {
            .terminal-container {
                padding: 20px;
                width: 95%;
            }

            .terminal-output {
                font-size: 0.85rem;
                min-height: 120px;
            }

            .scan .fingerprint {
                width: 240px;
                height: 240px;
                background-size: 240px;
            }

            .scan .fingerprint::before {
                background-size: 240px;
            }

            .scan h3 {
                font-size: 1.5em;
            }

            #status-label {
                font-size: 1.8em;
                letter-spacing: 3px;
                margin-top: 20px;
            }

            #welcome-message {
                font-size: 1.2em;
            }

            .encryption-layer h2 {
                font-size: 1.8em;
            }

            .firewall-node {
                width: 45px;
                height: 45px;
                font-size: 1.2em;
            }

            .neural-title {
                font-size: 2em;
            }

            .identity-confirmed {
                font-size: 1.8em;
            }

            .name-display {
                font-size: 2.5em;
                letter-spacing: 4px;
            }
        }

        @media (max-width: 400px) {
            .terminal-output {
                font-size: 0.75rem;
            }

            .scan .fingerprint {
                width: 140px;
                height: 140px;
                background-size: 140px;
            }

            .scan .fingerprint::before {
                background-size: 140px;
            }

            .scan h3 {
                font-size: 1.2em;
            }

            #status-label {
                font-size: 1.5em;
                letter-spacing: 2px;
            }

            .encryption-layer h2 {
                font-size: 1.5em;
            }

            .neural-title {
                font-size: 1.5em;
            }

            .identity-confirmed {
                font-size: 1.3em;
            }

            .name-display {
                font-size: 2em;
                letter-spacing: 3px;
            }
        }

        /* ----- FLASH OVERLAY ----- */
        #flash-overlay {
            position: fixed;
            top: 0;
            left: 0;
            width: 100vw;
            height: 100vh;
            background: #00ffff;
            opacity: 0;
            z-index: 9999;
            pointer-events: none;
            transition: opacity 0.15s ease-out;
        }

        #flash-overlay.flash {
            opacity: 1;
        }

        /* ----- PERSONNEL SECTION STYLES ----- */
        #personnel-section {
            position: fixed;
            top: 0;
            left: 0;
            width: 100vw;
            height: 100vh;
            display: none;
            background: radial-gradient(circle at center, #0a0f0a 0%, #050805 100%);
            z-index: 300;
            overflow-y: auto;
            padding: 20px;
        }

        .personnel-container {
            max-width: 1200px;
            margin: 0 auto;
            background: rgba(10, 15, 10, 0.85);
            border: 2px solid #3fefef;
            border-radius: 10px;
            box-shadow:
                0 0 50px rgba(63, 239, 239, 0.3),
                inset 0 0 50px rgba(0, 0, 0, 0.5);
            border-radius: 12px;
            padding: 40px;
            box-shadow: 0 0 50px rgba(63, 239, 239, 0.2), inset 0 0 30px rgba(0, 0, 0, 0.8);
            position: relative;
            backdrop-filter: blur(8px);
            -webkit-backdrop-filter: blur(8px);
            overflow: hidden;
            font-family: 'Consolas', 'Courier New', monospace;
        }

        .personnel-container::before {
            content: '';
            position: absolute;
            top: 0;
            left: -100%;
            width: 50%;
            height: 2px;
            background: linear-gradient(90deg, transparent, #3fefef, #00ffaa, transparent);
            animation: cyber-scan 6s linear infinite;
        }

        @keyframes cyber-scan {
            0% {
                left: -100%;
                opacity: 0;
            }

            50% {
                opacity: 1;
            }

            100% {
                left: 200%;
                opacity: 0;
            }
        }

        /* File Header */
        .file-header {
            display: flex;
            align-items: center;
            border-bottom: 2px solid rgba(63, 239, 239, 0.4);
            padding-bottom: 25px;
            margin-bottom: 35px;
            position: relative;
            flex-wrap: wrap;
            gap: 15px;
        }

        .file-icon {
            font-size: 3em;
            color: #3fefef;
            margin-right: 20px;
            animation: pulse 2s infinite;
            text-shadow: 0 0 15px #3fefef;
        }

        .file-header h1 {
            color: #00ffaa;
            font-size: clamp(1.8rem, 4vw, 2.5rem);
            letter-spacing: 4px;
            margin: 0;
            text-shadow: 0 0 10px rgba(0, 255, 170, 0.5);
            flex-grow: 1;
        }

        .security-badge {
            background: rgba(255, 40, 40, 0.15);
            border: 1px solid #ff2828;
            color: #ff2828;
            padding: 8px 15px;
            font-weight: bold;
            letter-spacing: 2px;
            border-radius: 4px;
            animation: glitch-badge 4s infinite;
            font-size: clamp(0.8rem, 2vw, 1rem);
            white-space: nowrap;
        }

        /* Data Grid Setup */
        .data-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(300px, 1fr));
            gap: 30px;
        }

        /* Unified Card Style */
        .data-card {
            background: rgba(15, 25, 30, 0.6);
            border: 1px solid rgba(63, 239, 239, 0.2);
            border-radius: 8px;
            padding: 25px;
            position: relative;
            transition: all 0.3s ease;
            box-shadow: inset 0 0 20px rgba(0, 0, 0, 0.5);
        }

        .data-card:hover {
            border-color: rgba(63, 239, 239, 0.6);
            box-shadow: 0 0 20px rgba(63, 239, 239, 0.15), inset 0 0 20px rgba(0, 0, 0, 0.5);
            transform: translateY(-3px);
        }

        .data-card::before {
            content: '';
            position: absolute;
            top: -1px;
            left: 15px;
            width: 30px;
            height: 2px;
            background: #3fefef;
            box-shadow: 0 0 10px #3fefef;
            transition: width 0.3s ease;
        }

        .data-card:hover::before {
            width: 60px;
            background: #00ffaa;
            box-shadow: 0 0 10px #00ffaa;
        }

        .data-card h2 {
            color: #3fefef;
            font-size: 1.4em;
            text-align: center;
            margin-bottom: 25px;
            letter-spacing: 2px;
            text-transform: uppercase;
        }

        .glow {
            color: #3fefef;
            text-shadow: 0 0 10px currentColor;
        }

        /* Data Rows */
        .data-row {
            display: flex;
            justify-content: space-between;
            margin-bottom: 15px;
            padding-bottom: 10px;
            border-bottom: 1px dotted rgba(63, 239, 239, 0.2);
        }

        .data-label {
            color: #8f9f8f;
            font-size: 0.95em;
            letter-spacing: 1px;
        }

        .data-value {
            color: #3fefef;
            font-weight: bold;
            font-size: 1.1em;
            text-shadow: 0 0 5px currentColor;
        }

        .status-active {
            color: #3eff3e !important;
            animation: blink-status 1.5s infinite;
        }

        /* Birthday Indicator */
        .birthday-indicator {
            position: relative;
            width: 100px;
            height: 100px;
            margin: 20px auto 0;
        }

        .pulse-ring {
            position: absolute;
            width: 100%;
            height: 100%;
            border: 3px solid #3fefef;
            border-radius: 50%;
            animation: pulse-ring 2s infinite;
        }

        .birthday-icon {
            position: absolute;
            top: 50%;
            left: 50%;
            transform: translate(-50%, -50%);
            font-size: 3em;
            animation: float 3s infinite ease-in-out;
        }

        /* Traits Grid */
        .trait-grid {
            display: flex;
            flex-direction: column;
            gap: 20px;
        }

        .trait-item {
            display: flex;
            flex-direction: column;
            gap: 8px;
        }

        .trait-name {
            color: #8f9f8f;
            font-size: 0.9em;
            letter-spacing: 1px;
            display: flex;
            justify-content: space-between;
        }

        .trait-bar {
            height: 10px;
            background: rgba(20, 30, 20, 0.8);
            border-radius: 5px;
            overflow: hidden;
            border: 1px solid rgba(63, 239, 239, 0.2);
        }

        .trait-fill {
            height: 100%;
            background: linear-gradient(90deg, #3fefef, #00ffaa);
            border-radius: 5px;
            transition: width 1.5s ease-out;
        }

        /* Notes List */
        .notes-list {
            display: flex;
            flex-direction: column;
            gap: 12px;
        }

        .note-item {
            color: #cfcfcf;
            font-size: 0.95em;
            display: flex;
            align-items: flex-start;
            gap: 10px;
        }

        .note-bullet {
            color: #3fefef;
            margin-top: 2px;
        }

        /* File Footer */
        .file-footer {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-top: 30px;
            padding-top: 20px;
            border-top: 1px solid rgba(63, 239, 239, 0.2);
        }

        .timestamp {
            color: #8f9f8f;
            font-size: 0.9em;
            letter-spacing: 1px;
        }

        .action-buttons {
            display: flex;
            gap: 20px;
        }

        .cyber-btn {
            padding: 12px 30px;
            background: transparent;
            border: 1px solid #3fefef;
            color: #3fefef;
            font-family: 'Consolas', monospace;
            font-size: 0.9em;
            letter-spacing: 2px;
            text-transform: uppercase;
            cursor: pointer;
            transition: all 0.3s;
            border-radius: 3px;
        }

        .cyber-btn:hover {
            background: rgba(63, 239, 239, 0.1);
            box-shadow: 0 0 20px rgba(63, 239, 239, 0.3);
            transform: translateY(-2px);
        }

        .cyber-btn.primary {
            background: rgba(63, 239, 239, 0.1);
            border-width: 2px;
        }

        .cyber-btn.primary:hover {
            background: rgba(63, 239, 239, 0.2);
            box-shadow: 0 0 30px rgba(63, 239, 239, 0.5);
        }

        /* Animations */
        @keyframes pulse-ring {
            0% {
                transform: scale(0.8);
                opacity: 0.8;
            }

            100% {
                transform: scale(1.2);
                opacity: 0;
            }
        }

        @keyframes float {

            0%,
            100% {
                transform: translate(-50%, -50%) translateY(0);
            }

            50% {
                transform: translate(-50%, -50%) translateY(-10px);
            }
        }

        @keyframes blink-status {

            0%,
            100% {
                opacity: 1;
            }

            50% {
                opacity: 0.7;
            }
        }

        @keyframes glitch-badge {
            0% {
                opacity: 1;
                transform: translateX(0);
            }

            97% {
                opacity: 1;
                transform: translateX(0);
            }

            98% {
                opacity: 0.8;
                transform: translateX(-1px);
            }

            99% {
                opacity: 0.9;
                transform: translateX(1px);
            }

            100% {
                opacity: 1;
                transform: translateX(0);
            }
        }

        /* Terminal Typing Effect */
        .typewriter {
            overflow: hidden;
            border-right: 2px solid #3fefef;
            white-space: nowrap;
            animation: typing 3.5s steps(40, end), blink-caret 0.75s step-end infinite;
        }

        @keyframes typing {
            from {
                width: 0
            }

            to {
                width: 100%
            }
        }

        @keyframes blink-caret {

            from,
            to {
                border-color: transparent
            }

            50% {
                border-color: #3fefef;
            }
        }

        /* ----- MISSION SECTION STYLES ----- */
        #mission-section {
            position: fixed;
            top: 0;
            left: 0;
            width: 100vw;
            height: 100vh;
            display: none;
            background: radial-gradient(circle at center, #0a0f0a 0%, #050805 100%);
            z-index: 400;
            padding: 20px;
            overflow-y: auto;
        }

        .mission-terminal {
            max-width: 900px;
            margin: 50px auto;
            background: rgba(10, 15, 10, 0.9);
            border: 3px solid #3fefef;
            border-radius: 15px;
            box-shadow:
                0 0 80px rgba(63, 239, 239, 0.4),
                inset 0 0 60px rgba(0, 0, 0, 0.7);
            padding: 40px;
            position: relative;
            overflow: hidden;
            font-family: 'Consolas', 'Courier New', monospace;
        }

        .mission-terminal::before {
            content: '';
            position: absolute;
            top: 0;
            left: 0;
            right: 0;
            height: 4px;
            background: linear-gradient(90deg,
                    transparent,
                    #3fefef,
                    #00ffaa,
                    #3fefef,
                    transparent);
            animation: scanline 4s linear infinite;
        }

        @keyframes scanline {
            0% {
                transform: translateX(-100%);
            }

            100% {
                transform: translateX(100%);
            }
        }

        /* Mission Header */
        .mission-header {
            text-align: center;
            margin-bottom: 40px;
            padding-bottom: 20px;
            border-bottom: 2px solid rgba(63, 239, 239, 0.3);
            position: relative;
        }

        .mission-header h1 {
            color: #3fefef;
            font-size: 2.8em;
            letter-spacing: 3px;
            text-transform: uppercase;
            margin-bottom: 15px;
            text-shadow:
                0 0 15px #3fefef,
                0 0 30px rgba(63, 239, 239, 0.5);
            animation: text-glow 2s ease-in-out infinite alternate;
        }

        @keyframes text-glow {
            from {
                text-shadow: 0 0 15px #3fefef, 0 0 30px rgba(63, 239, 239, 0.5);
            }

            to {
                text-shadow: 0 0 20px #3fefef, 0 0 40px rgba(63, 239, 239, 0.7), 0 0 60px rgba(63, 239, 239, 0.3);
            }
        }

        .mission-code {
            display: inline-block;
            padding: 10px 25px;
            background: rgba(255, 40, 40, 0.15);
            border: 2px solid #ff2828;
            color: #ff2828;
            font-size: 1.2em;
            letter-spacing: 4px;
            border-radius: 5px;
            text-transform: uppercase;
            animation: glitch-border 3s infinite;
        }

        @keyframes glitch-border {

            0%,
            100% {
                border-color: #ff2828;
            }

            33% {
                border-color: #3fefef;
            }

            66% {
                border-color: #00ffaa;
            }
        }

        /* Mission Objectives */
        .mission-objectives {
            background: rgba(15, 25, 30, 0.6);
            border: 1px solid rgba(63, 239, 239, 0.2);
            border-radius: 12px;
            padding: 35px 30px;
            margin-bottom: 40px;
            position: relative;
            overflow: hidden;
            backdrop-filter: blur(8px);
            -webkit-backdrop-filter: blur(8px);
            box-shadow: inset 0 0 30px rgba(0, 0, 0, 0.6);
        }

        .mission-objectives::before {
            content: '‚ùØ';
            position: absolute;
            top: 20px;
            left: 15px;
            color: #3fefef;
            font-size: 1.5em;
            animation: blink-cursor 1s step-end infinite;
        }

        .mission-objectives h2 {
            color: #00ffaa;
            font-size: 1.8em;
            margin-bottom: 25px;
            padding-left: 30px;
            letter-spacing: 2px;
        }

        .cyber-list {
            list-style: none;
            padding-left: 30px;
        }

        .cyber-list li {
            color: #cfcfcf;
            font-size: clamp(1rem, 2.5vw, 1.2rem);
            margin-bottom: 18px;
            padding: 15px 20px;
            background: rgba(20, 30, 35, 0.7);
            border-left: 4px solid #3fefef;
            border-radius: 0 8px 8px 0;
            transition: all 0.3s cubic-bezier(0.4, 0, 0.2, 1);
            position: relative;
            overflow: hidden;
            display: flex;
            align-items: center;
            justify-content: space-between;
        }

        .cyber-list li::before {
            content: '';
            position: absolute;
            left: 0;
            top: 0;
            height: 100%;
            width: 0;
            background: linear-gradient(90deg,
                    rgba(63, 239, 239, 0.1),
                    rgba(0, 255, 170, 0.1));
            transition: width 0.3s;
        }

        .cyber-list li:hover {
            transform: translateX(10px);
            border-left-color: #00ffaa;
            box-shadow: 5px 0 20px rgba(0, 255, 170, 0.2);
        }

        .cyber-list li:hover::before {
            width: 100%;
        }

        .cyber-list li:nth-child(1)::after {
            content: ' [PRIORITY]';
            color: #ff2828;
        }

        .cyber-list li:nth-child(2)::after {
            content: ' [REQUIRED]';
            color: #3fefef;
        }

        .cyber-list li:nth-child(3)::after {
            content: ' [ENCRYPTED]';
            color: #00ffaa;
        }

        .cyber-list li:nth-child(4)::after {
            content: ' [FUN]';
            color: #ffff00;
        }

        /* Countdown Timer */
        .countdown-timer {
            background: rgba(0, 0, 0, 0.3);
            border: 2px solid rgba(63, 239, 239, 0.4);
            border-radius: 10px;
            padding: 30px;
            margin-bottom: 40px;
            text-align: center;
            box-shadow:
                0 0 30px rgba(63, 239, 239, 0.2),
                inset 0 0 20px rgba(0, 0, 0, 0.5);
        }

        .countdown-timer h3 {
            color: #3fefef;
            font-size: 1.8em;
            margin-bottom: 25px;
            letter-spacing: 2px;
            text-transform: uppercase;
        }

        .timer-display {
            display: flex;
            justify-content: center;
            gap: 25px;
            flex-wrap: wrap;
        }

        .time-unit {
            display: flex;
            flex-direction: column;
            align-items: center;
            min-width: 120px;
            padding: 20px 15px;
            background: rgba(10, 15, 10, 0.8);
            border: 2px solid rgba(63, 239, 239, 0.3);
            border-radius: 8px;
            position: relative;
            overflow: hidden;
        }

        .time-unit::before {
            content: '';
            position: absolute;
            top: 0;
            left: 0;
            right: 0;
            height: 3px;
            background: linear-gradient(90deg, #3fefef, #00ffaa);
            animation: pulse 2s infinite;
        }

        .time-value {
            color: #00ffaa;
            font-size: 3.5em;
            font-weight: bold;
            font-family: 'Courier New', monospace;
            text-shadow: 0 0 10px #00ffaa;
            margin-bottom: 5px;
            animation: digit-pulse 1s infinite;
        }

        @keyframes digit-pulse {

            0%,
            100% {
                opacity: 1;
            }

            50% {
                opacity: 0.9;
            }
        }

        .time-label {
            color: #8f9f8f;
            font-size: 0.9em;
            letter-spacing: 3px;
            text-transform: uppercase;
        }

        /* Mission Controls */
        .mission-controls {
            display: flex;
            justify-content: center;
            gap: 30px;
            margin-top: 40px;
            padding-top: 30px;
            border-top: 1px solid rgba(63, 239, 239, 0.2);
        }

        .mission-btn {
            padding: 15px 40px;
            background: rgba(63, 239, 239, 0.1);
            border: 2px solid #3fefef;
            color: #3fefef;
            font-family: 'Consolas', monospace;
            font-size: 1.1em;
            letter-spacing: 3px;
            text-transform: uppercase;
            cursor: pointer;
            transition: all 0.3s;
            border-radius: 5px;
            position: relative;
            overflow: hidden;
        }

        .mission-btn::before {
            content: '';
            position: absolute;
            top: 50%;
            left: 50%;
            width: 0;
            height: 0;
            border-radius: 50%;
            background: rgba(63, 239, 239, 0.2);
            transform: translate(-50%, -50%);
            transition: width 0.6s, height 0.6s;
        }

        .mission-btn:hover {
            background: rgba(63, 239, 239, 0.2);
            box-shadow:
                0 0 30px rgba(63, 239, 239, 0.4),
                0 0 60px rgba(63, 239, 239, 0.2);
            transform: translateY(-3px);
            border-color: #00ffaa;
            color: #00ffaa;
        }

        .mission-btn:hover::before {
            width: 300px;
            height: 300px;
        }

        .mission-btn:active {
            transform: translateY(-1px);
        }

        .mission-btn.primary {
            background: linear-gradient(135deg,
                    rgba(63, 239, 239, 0.2),
                    rgba(0, 255, 170, 0.2));
            border-width: 3px;
            box-shadow: 0 0 25px rgba(63, 239, 239, 0.3);
        }

        /* Completion Animation */
        .confirmation-box {
            position: fixed;
            top: 50%;
            left: 50%;
            transform: translate(-50%, -50%);
            background: rgba(10, 15, 10, 0.95);
            border: 3px solid #3eff3e;
            border-radius: 10px;
            padding: 40px;
            text-align: center;
            z-index: 1000;
            display: none;
            box-shadow: 0 0 100px rgba(62, 255, 62, 0.5);
        }

        .confirmation-box h2 {
            color: #3eff3e;
            font-size: 2.5em;
            margin-bottom: 20px;
            text-shadow: 0 0 20px #3eff3e;
        }

        .confirmation-box p {
            color: #cfcfcf;
            font-size: 1.2em;
            margin-bottom: 30px;
        }

        /* Progress Bar */
        .mission-progress {
            margin-top: 30px;
        }

        .progress-text {
            color: #8f9f8f;
            font-size: 0.9em;
            margin-bottom: 10px;
            text-align: center;
        }

        .progress-bar {
            height: 15px;
            background: rgba(20, 30, 20, 0.8);
            border-radius: 7px;
            overflow: hidden;
            border: 1px solid rgba(63, 239, 239, 0.3);
        }

        .progress-fill {
            height: 100%;
            background: linear-gradient(90deg, #3fefef, #00ffaa);
            border-radius: 7px;
            width: 0%;
            transition: width 2s ease-out;
        }

        /* Mission Objectives Lock System */
        .cyber-list li {
            cursor: pointer;
            transition: all 0.3s ease;
            padding: 12px;
            border-radius: 5px;
            border: 1px solid transparent;
            margin: 8px 0;
        }

        .cyber-list li:not([style*="cursor: not-allowed"]) {
            background: rgba(63, 239, 239, 0.05);
        }

        .cyber-list li:hover:not([style*="cursor: not-allowed"]) {
            background: rgba(63, 239, 239, 0.15);
            border-color: rgba(63, 239, 239, 0.3);
            text-shadow: 0 0 10px rgba(63, 239, 239, 0.5);
            transform: translateX(5px);
        }

        .pulse-unlocked {
            animation: pulse-glow 1.5s infinite;
        }

        @keyframes pulse-glow {

            0%,
            100% {
                text-shadow: 0 0 5px rgba(63, 239, 239, 0.5);
                color: #3fefef;
                box-shadow: inset 5px 0 15px rgba(63, 239, 239, 0.1);
            }

            50% {
                text-shadow: 0 0 15px rgba(0, 255, 170, 0.8);
                color: #00ffaa;
                box-shadow: inset 5px 0 25px rgba(0, 255, 170, 0.2);
            }
        }

        /* Mission Progress Tracker */
        .mission-progress-tracker {
            margin-top: 50px;
            padding: 35px 30px;
            background: rgba(10, 15, 20, 0.7);
            border: 1px solid rgba(63, 239, 239, 0.3);
            border-radius: 12px;
            position: relative;
            backdrop-filter: blur(10px);
            -webkit-backdrop-filter: blur(10px);
            box-shadow: 0 15px 40px rgba(0, 0, 0, 0.6), inset 0 0 20px rgba(63, 239, 239, 0.05);
            text-align: center;
        }

        .progress-title {
            color: #3fefef;
            font-size: 1.3em;
            letter-spacing: 5px;
            margin-bottom: 40px;
            text-shadow: 0 0 15px rgba(63, 239, 239, 0.4);
            font-weight: bold;
        }

        .progress-steps-container {
            position: relative;
            max-width: 600px;
            margin: 0 auto;
            padding: 0 20px;
        }

        .progress-steps {
            display: flex;
            justify-content: space-between;
            position: relative;
            z-index: 2;
        }

        .step {
            width: 50px;
            height: 50px;
            border-radius: 50%;
            background: #050a0f;
            border: 2px solid rgba(63, 239, 239, 0.3);
            color: rgba(63, 239, 239, 0.5);
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 1.3em;
            font-weight: bold;
            font-family: 'Consolas', monospace;
            transition: all 0.5s cubic-bezier(0.4, 0, 0.2, 1);
            box-shadow: 0 5px 15px rgba(0, 0, 0, 0.8);
        }

        .step.active {
            border-color: #00ffaa;
            color: #00ffaa;
            background: rgba(0, 255, 170, 0.1);
            box-shadow: 0 0 25px rgba(0, 255, 170, 0.4), inset 0 0 15px rgba(0, 255, 170, 0.2);
            transform: scale(1.15);
            text-shadow: 0 0 8px #00ffaa;
        }

        .step.completed {
            background: rgba(63, 239, 239, 0.2);
            border-color: #3fefef;
            color: #fff;
            box-shadow: 0 0 20px rgba(63, 239, 239, 0.4);
            text-shadow: 0 0 5px #fff;
        }

        .progress-connector {
            position: absolute;
            top: 50%;
            left: 45px;
            right: 45px;
            transform: translateY(-50%);
            height: 4px;
            background: rgba(63, 239, 239, 0.15);
            z-index: 1;
            border-radius: 2px;
            overflow: hidden;
        }

        .progress-connector-fill {
            height: 100%;
            background: linear-gradient(90deg, #3fefef, #00ffaa);
            width: 0%;
            transition: width 1s cubic-bezier(0.4, 0, 0.2, 1);
            box-shadow: 0 0 15px #00ffaa;
        }

        .objective-locked {
            animation: none;
        }

        /* Responsive Design */
        @media (max-width: 768px) {
            .personnel-container {
                padding: 20px;
                margin: 20px;
            }

            .mission-terminal {
                padding: 25px 20px;
                margin: 20px;
            }

            .mission-header h1 {
                font-size: clamp(1.8rem, 5vw, 2.5rem);
            }

            .timer-display {
                gap: 15px;
            }

            .time-unit {
                flex: 1 1 40%;
                min-width: 90px;
                padding: 15px 10px;
            }

            .time-value {
                font-size: 2.5em;
            }

            .mission-controls {
                flex-direction: column;
                gap: 15px;
            }

            .mission-btn {
                width: 100%;
                padding: 15px 20px;
            }

            .cyber-btn {
                width: 100%;
                text-align: center;
                margin-bottom: 10px;
            }

            .action-buttons {
                flex-direction: column;
                width: 100%;
            }

            .file-header {
                flex-direction: column;
                text-align: center;
                padding-top: 10px;
            }

            .file-icon {
                margin-right: 0;
                margin-bottom: 10px;
            }

            .file-footer {
                flex-direction: column;
                gap: 20px;
            }
        }

        @media (max-width: 480px) {
            .timer-display {
                gap: 10px;
            }

            .time-unit {
                min-width: 70px;
                padding: 12px 8px;
            }

            .time-value {
                font-size: 2em;
            }

            .cyber-list li {
                font-size: 1em;
                padding: 10px;
            }
        }
    </style>
</head>

<body>

    <!-- Section 1: Terminal Hacking Sequence -->
    <section id="terminal-section">
        <div class="terminal-container">
            <div class="terminal-output" id="terminal-output">
                <!-- Terminal text will be dynamically generated -->
            </div>
            <span class="terminal-cursor"></span>
        </div>
    </section>

    <!-- Fingerprint Scanner Section -->
    <section id="scanner-section">
        <div class="scan" id="fingerprintScanner">
            <div class="fingerprint"></div>
            <h3>Scanning...</h3>
            <p class="hint-text" id="hint-text">Hold Finger to Scan</p>
        </div>
        <div id="status-label">Access Denied</div>
        <div id="welcome-message">WELCOME ZAARGULL</div>
    </section>

    <!-- Decryption Section -->
    <section id="decryption-section">
        <canvas id="hex-matrix"></canvas>
        <div class="decryption-container">
            <div class="encryption-layer">
                <h2>CORE DECRYPTION SEQUENCE</h2>
                <div class="progress-container">
                    <div class="progress-bar" id="progress-bar"></div>
                    <div class="progress-text" id="progress-text">0%</div>
                </div>
                <div class="status-message" id="status-message">Initializing decryption protocol...</div>

                <div class="firewall-breaches">
                    <div class="firewall-node" id="firewall1">F1</div>
                    <div class="firewall-node" id="firewall2">F2</div>
                    <div class="firewall-node" id="firewall3">F3</div>
                    <div class="firewall-node" id="firewall4">F4</div>
                    <div class="firewall-node" id="firewall5">F5</div>
                </div>
            </div>
        </div>
    </section>

    <!-- Neural Verification Section -->
    <section id="neural-section">
        <canvas id="neuralCanvas"></canvas>
        <div class="neural-overlay">
            <div class="neural-title" id="neural-title">NEURAL VERIFICATION</div>
            <div class="identity-confirmed" id="identity-confirmed">IDENTITY CONFIRMED</div>
            <div class="name-display" id="name-display">ZAARGULL</div>
        </div>
    </section>

    <!-- Flash Overlay -->
    <div id="flash-overlay"></div>

    <!-- Add this section before </body> -->
    <section id="personnel-section">
        <div class="personnel-container">
            <!-- Header -->
            <div class="file-header">
                <div class="file-icon">‚éî</div>
                <h1>SECURE PERSONNEL FILE</h1>
                <div class="security-badge">TOP SECRET // EYES ONLY</div>
            </div>

            <!-- Main Content Grid -->
            <div class="data-grid">
                <!-- Left Column: Core Identity -->
                <div class="data-column">
                    <div class="data-card">
                        <h2><span class="glowing-text">‚éî‚éî‚éî</span> CORE IDENTITY <span class="glowing-text">‚éî‚éî‚éî</span>
                        </h2>

                        <div class="data-row">
                            <span class="data-label">OPERATIVE NAME:</span>
                            <span class="data-value" id="data-name">ZAARGULL</span>
                        </div>

                        <div class="data-row">
                            <span class="data-label">CLEARANCE LEVEL:</span>
                            <span class="data-value" id="data-clearance">OMEGA-9</span>
                        </div>

                        <div class="data-row">
                            <span class="data-label">STATUS:</span>
                            <span class="data-value status-active">ACTIVE</span>
                        </div>
                    </div>

                    <div class="data-card">
                        <h2>‚éî BIOMETRIC DATA ‚éî</h2>

                        <div class="data-row">
                            <span class="data-label">DATE OF BIRTH:</span>
                            <span class="data-value" id="data-dob">[CLASSIFIED]</span>
                        </div>

                        <div class="data-row">
                            <span class="data-label">EARTH YEARS:</span>
                            <span class="data-value" id="data-age">[CALCULATING]</span>
                        </div>

                        <div class="data-row">
                            <span class="data-label">BIRTHDAY STATUS:</span>
                            <span class="data-value" id="data-birthday">ANALYZING...</span>
                        </div>

                        <!-- Fun visualization -->
                        <div class="birthday-indicator">
                            <div class="pulse-ring"></div>
                            <div class="birthday-icon">üéÇ</div>
                        </div>
                    </div>
                </div>

                <!-- Right Column: Personality & Traits -->
                <div class="data-column">
                    <div class="data-card">
                        <h2>‚éî PSYCH PROFILE ‚éî</h2>

                        <div class="trait-grid">
                            <div class="trait-item">
                                <div class="trait-name">INTELLIGENCE</div>
                                <div class="trait-bar">
                                    <div class="trait-fill" style="width: 94%"></div>
                                </div>
                            </div>

                            <div class="trait-item">
                                <div class="trait-name">LOYALTY</div>
                                <div class="trait-bar">
                                    <div class="trait-fill" style="width: 98%"></div>
                                </div>
                            </div>

                            <div class="trait-item">
                                <div class="trait-name">HUMOR</div>
                                <div class="trait-bar">
                                    <div class="trait-fill" style="width: 88%"></div>
                                </div>
                            </div>

                            <div class="trait-item">
                                <div class="trait-name">CREATIVITY</div>
                                <div class="trait-bar">
                                    <div class="trait-fill" style="width: 92%"></div>
                                </div>
                            </div>
                        </div>
                    </div>

                    <div class="data-card">
                        <h2>‚éî PERSONNEL NOTES ‚éî</h2>

                        <div class="notes-list">
                            <div class="note-item">
                                <span class="note-bullet">‚ñ∂</span>
                                <span>EXCEPTIONAL PROBLEM SOLVER</span>
                            </div>
                            <div class="note-item">
                                <span class="note-bullet">‚ñ∂</span>
                                <span>TRUSTED WITH HIGHEST CLEARANCE</span>
                            </div>
                            <div class="note-item">
                                <span class="note-bullet">‚ñ∂</span>
                                <span>POSITIVE INFLUENCE ON TEAM MORALE</span>
                            </div>
                            <div class="note-item">
                                <span class="note-bullet">‚ñ∂</span>
                                <span>BIRTHDAY: CLASSIFIED (CELEBRATION PROTOCOL ACTIVE)</span>
                            </div>
                        </div>
                    </div>
                </div>
            </div>

            <!-- Footer with action buttons -->
            <div class="file-footer">
                <div class="timestamp">LAST UPDATED: <span id="current-time">[SYSTEM TIME]</span></div>
                <div class="action-buttons">
                    <button class="cyber-btn primary" id="celebrate-btn">CELEBRATION PROTOCOL</button>
                </div>
            </div>
        </div>
    </section>

    <!-- After personnel section -->
    <section id="mission-section">
        <div class="mission-terminal">
            <div class="mission-header">
                <h1>üéÇ BIRTHDAY MISSION BRIEFING</h1>
                <div class="mission-code">OPERATION: CELEBRATION</div>
            </div>

            <div class="mission-objectives">
                <h2>PRIMARY OBJECTIVES:</h2>
                <ul class="cyber-list">
                    <li>‚óà ACTIVATE CELEBRATION PROTOCOLS</li>
                    <li>‚óà ACCEPT DIGITAL WELL-WISHES</li>
                    <li>‚óà OPEN ENCRYPTED GIFTS</li>
                    <li>‚óà CONSUME BIRTHDAY CAKE (CARBON-BASED)</li>
                </ul>
            </div>

            <div class="countdown-timer">
                <h3>BIRTHDAY COUNTDOWN:</h3>
                <div class="timer-display">
                    <div class="time-unit">
                        <span class="time-value" id="days">00</span>
                        <span class="time-label">DAYS</span>
                    </div>
                    <div class="time-unit">
                        <span class="time-value" id="hours">00</span>
                        <span class="time-label">HOURS</span>
                    </div>
                    <div class="time-unit">
                        <span class="time-value" id="minutes">00</span>
                        <span class="time-label">MINUTES</span>
                    </div>
                    <div class="time-unit">
                        <span class="time-value" id="seconds">00</span>
                        <span class="time-label">SECONDS</span>
                    </div>
                </div>
            </div>


        </div>
        <!-- Add this to mission section HTML -->
        <div class="mission-progress-tracker">
            <div class="progress-title">MISSION PROGRESS</div>
            <div class="progress-steps-container">
                <div class="progress-connector">
                    <div class="progress-connector-fill" id="bottom-progress-fill"></div>
                </div>
                <div class="progress-steps">
                    <div class="step" data-step="1">1</div>
                    <div class="step" data-step="2">2</div>
                    <div class="step" data-step="3">3</div>
                    <div class="step" data-step="4">4</div>
                </div>
            </div>
        </div>
    </section>


    <script>
        const CONFIG = {
            GLITCH_PROBABILITY: 0.3,
            SCAN_DURATION: 3000, // 3 seconds scan
            DECRYPTION_DURATION: 8000, // 8 seconds decryption
            NEURAL_DURATION: 10000 // 10 seconds neural
        };

        const TERMINAL_MESSAGES = [
            '> Initializing secure access protocol...',
            '> Establishing encrypted connection...',
            '> Accessing secure database...',
            '> Decrypting credentials...',
            '> Verifying biometric authentication...',
            '> Biometric authentication required',
        ];

        const elements = {
            terminalSection: document.getElementById('terminal-section'),
            terminalOutput: document.getElementById('terminal-output'),
            scannerSection: document.getElementById('scanner-section'),
            scanner: document.getElementById('fingerprintScanner'),
            statusLabel: document.getElementById('status-label'),
            welcomeMessage: document.getElementById('welcome-message'),
            hintText: document.getElementById('hint-text'),
            decryptionSection: document.getElementById('decryption-section'),
            hexMatrix: document.getElementById('hex-matrix'),
            progressBar: document.getElementById('progress-bar'),
            progressText: document.getElementById('progress-text'),
            statusMessage: document.getElementById('status-message'),
            firewallNodes: [
                document.getElementById('firewall1'),
                document.getElementById('firewall2'),
                document.getElementById('firewall3'),
                document.getElementById('firewall4'),
                document.getElementById('firewall5')
            ],
            neuralSection: document.getElementById('neural-section'),
            neuralCanvas: document.getElementById('neuralCanvas'),
            neuralTitle: document.getElementById('neural-title'),
            identityConfirmed: document.getElementById('identity-confirmed'),
            nameDisplay: document.getElementById('name-display'),
            flashOverlay: document.getElementById('flash-overlay'),
            personnelSection: document.getElementById('personnel-section'),
            missionSection: document.getElementById('mission-section')
        };
        const terminalAudio = new Audio('terminal.mp3');
        terminalAudio.loop = true;

        let scanCount = 0;
        let isScanning = false;
        let isProcessing = false;
        let scanStartTime = null;
        let animationFrame = null;

        // Hex Matrix Variables
        let hexMatrixCtx;
        let hexChars = "0123456789ABCDEF";
        let hexColumns = [];
        let hexMatrixWidth, hexMatrixHeight;

        // Neural Variables
        let neuralScene, neuralCamera, neuralRenderer;
        let neuralParticles = [];
        let neuralConnections = [];
        let particleCount = 1500;
        let neuralPhase = 0;
        let targetPositions = [];

        function displayTerminalSequence() {
            terminalAudio.play().catch(e => console.log("Audio play blocked until user interaction", e));
            elements.terminalOutput.innerHTML = '';
            let messageIndex = 0;
            let charIndex = 0;
            let currentLine = '';

            function typeNextCharacter() {
                if (messageIndex >= TERMINAL_MESSAGES.length) {
                    setTimeout(() => {
                        elements.terminalSection.style.opacity = '0';
                        terminalAudio.pause();
                        terminalAudio.currentTime = 0;
                        setTimeout(() => {
                            elements.terminalSection.style.display = 'none';
                            initFingerprint();
                        }, 1000);
                    }, 1000);
                    return;
                }

                const message = TERMINAL_MESSAGES[messageIndex];

                if (charIndex < message.length) {
                    currentLine += message[charIndex];
                    charIndex++;

                    let lines = elements.terminalOutput.querySelectorAll('.terminal-line');
                    if (lines.length <= messageIndex) {
                        const lineEl = document.createElement('div');
                        lineEl.className = 'terminal-line';
                        lineEl.innerHTML = currentLine;
                        elements.terminalOutput.appendChild(lineEl);
                    } else {
                        lines[messageIndex].innerHTML = currentLine;
                    }

                    setTimeout(typeNextCharacter, Math.random() * 50 + 30);
                } else {
                    let lines = elements.terminalOutput.querySelectorAll('.terminal-line');
                    let lineEl = lines[messageIndex];

                    if (Math.random() < CONFIG.GLITCH_PROBABILITY) {
                        applyGlitch(lineEl);
                    }

                    messageIndex++;
                    charIndex = 0;
                    currentLine = '';
                    setTimeout(typeNextCharacter, 300);
                }
            }

            typeNextCharacter();
        }

        function applyGlitch(element) {
            const text = element.textContent;
            element.innerHTML = `<span class="glitch" data-glitch="${text}">${text}</span>`;
            setTimeout(() => {
                element.innerHTML = text;
            }, 300);
        }

        function initFingerprint() {
            elements.scannerSection.style.display = 'flex';
            setTimeout(() => {
                elements.scannerSection.style.opacity = '1';
            }, 100);

            // Add Interaction Listeners
            elements.scanner.addEventListener('mousedown', startScanning);
            elements.scanner.addEventListener('touchstart', (e) => { e.preventDefault(); startScanning(); });

            window.addEventListener('mouseup', stopScanning);
            window.addEventListener('touchend', stopScanning);
            elements.scanner.addEventListener('mouseleave', stopScanning);
        }

        function startScanning() {
            if (isScanning || isProcessing) return;
            isScanning = true;
            scanStartTime = Date.now();

            elements.scanner.classList.add('scanning');
            elements.hintText.style.opacity = '0';
            elements.statusLabel.style.display = 'none';
            elements.welcomeMessage.style.opacity = '0';

            animateScan();
        }

        function stopScanning() {
            if (!isScanning) return;
            isScanning = false;
            cancelAnimationFrame(animationFrame);
            elements.scanner.classList.remove('scanning');

            if (!isProcessing) {
                elements.hintText.style.opacity = '1';
                resetScanVisuals();
            }
        }

        function animateScan() {
            if (!isScanning) return;

            const elapsed = Date.now() - scanStartTime;
            const progress = Math.min(elapsed / CONFIG.SCAN_DURATION, 1);

            updateScanVisuals(progress * 100);

            if (progress >= 1) {
                completeScan();
            } else {
                animationFrame = requestAnimationFrame(animateScan);
            }
        }

        function updateScanVisuals(percent) {
            let styleTag = document.getElementById('dynamic-scan-style');
            if (!styleTag) {
                styleTag = document.createElement('style');
                styleTag.id = 'dynamic-scan-style';
                document.head.appendChild(styleTag);
            }
            styleTag.textContent = `
                .scan.scanning .fingerprint::before { height: ${percent}% !important; }
                .scan.scanning .fingerprint::after { top: ${Math.min(percent, 98)}% !important; }
            `;
        }

        function resetScanVisuals() {
            const styleTag = document.getElementById('dynamic-scan-style');
            if (styleTag) {
                styleTag.textContent = `
                    .fingerprint::before { height: 0% !important; transition: height 0.3s ease-out; }
                    .fingerprint::after { top: 0% !important; transition: top 0.3s ease-out; }
                `;
                setTimeout(() => {
                    if (styleTag && !isScanning) styleTag.textContent = '';
                }, 300);
            }
        }

        function completeScan() {
            isScanning = false;
            isProcessing = true;
            cancelAnimationFrame(animationFrame);
            elements.scanner.classList.remove('scanning');

            scanCount++;

            setTimeout(() => {
                if (scanCount === 1) {
                    // First scan: Denied
                    elements.statusLabel.textContent = "Access Denied";
                    elements.statusLabel.className = 'denied';
                    elements.statusLabel.style.display = 'block';

                    setTimeout(() => {
                        isProcessing = false;
                        elements.statusLabel.style.display = 'none';
                        elements.hintText.style.opacity = '1';
                        resetScanVisuals();
                    }, 2000);
                } else {
                    // Second scan: Granted
                    elements.statusLabel.textContent = "Access Granted";
                    elements.statusLabel.className = 'granted';
                    elements.statusLabel.style.display = 'block';

                    setTimeout(() => {
                        elements.welcomeMessage.style.opacity = '1';
                        // Trigger decryption after showing welcome
                        setTimeout(() => {
                            startDecryptionSequence();
                        }, 1500);
                    }, 500);
                }
            }, 500);
        }

        function startDecryptionSequence() {
            // Flash effect
            elements.flashOverlay.classList.add('flash');
            setTimeout(() => {
                elements.flashOverlay.classList.remove('flash');
            }, 150);

            // Hide scanner
            elements.scannerSection.style.transition = 'opacity 0.5s ease';
            elements.scannerSection.style.opacity = '0';

            setTimeout(() => {
                elements.scannerSection.style.display = 'none';
                elements.decryptionSection.style.display = 'block';

                // Initialize hex matrix
                initHexMatrix();
                // Start decryption animation
                startDecryptionAnimation();
            }, 500);
        }

        function initHexMatrix() {
            hexMatrixWidth = elements.hexMatrix.width = window.innerWidth;
            hexMatrixHeight = elements.hexMatrix.height = window.innerHeight;
            hexMatrixCtx = elements.hexMatrix.getContext('2d');

            // Initialize columns
            const columnWidth = 20;
            hexColumns = [];
            for (let i = 0; i < Math.floor(hexMatrixWidth / columnWidth); i++) {
                hexColumns.push({
                    x: i * columnWidth,
                    y: Math.random() * -hexMatrixHeight,
                    speed: 1 + Math.random() * 2,
                    length: 10 + Math.floor(Math.random() * 20)
                });
            }

            // Start animation
            animateHexMatrix();
        }

        function animateHexMatrix() {
            hexMatrixCtx.fillStyle = 'rgba(0, 0, 0, 0.05)';
            hexMatrixCtx.fillRect(0, 0, hexMatrixWidth, hexMatrixHeight);

            hexMatrixCtx.fillStyle = '#3fefef';
            hexMatrixCtx.font = '16px Consolas, monospace';

            hexColumns.forEach(column => {
                // Draw column characters
                for (let i = 0; i < column.length; i++) {
                    const char = hexChars[Math.floor(Math.random() * hexChars.length)];
                    const y = column.y + (i * 20);

                    // Gradient opacity
                    const opacity = i === 0 ? 1 : (1 - (i / column.length));
                    hexMatrixCtx.fillStyle = `rgba(63, 239, 239, ${opacity})`;

                    hexMatrixCtx.fillText(char, column.x, y);
                }

                // Move column down
                column.y += column.speed;

                // Reset column if it goes off screen
                if (column.y > hexMatrixHeight) {
                    column.y = -column.length * 20;
                }
            });

            // Continue animation if decryption section is visible
            if (elements.decryptionSection.style.display === 'block') {
                requestAnimationFrame(animateHexMatrix);
            }
        }

        function startDecryptionAnimation() {
            let progress = 0;
            const messages = [
                "Initializing decryption protocol...",
                "Accessing encrypted data streams...",
                "Breaking primary encryption layer...",
                "Bypassing firewall F1...",
                "Bypassing firewall F2...",
                "Bypassing firewall F3...",
                "Bypassing firewall F4...",
                "Bypassing firewall F5...",
                "Finalizing decryption...",
                "CORE SYSTEMS UNLOCKED"
            ];
            let messageIndex = 0;

            const interval = setInterval(() => {
                progress += 1;
                if (progress > 100) progress = 100;

                // Update progress bar
                elements.progressBar.style.width = `${progress}%`;
                elements.progressText.textContent = `${progress}%`;

                // Update status message at intervals
                if (progress % 10 === 0 && messageIndex < messages.length) {
                    elements.statusMessage.textContent = messages[messageIndex];
                    messageIndex++;
                }

                // Activate firewall nodes
                if (progress >= 30 && !elements.firewallNodes[0].classList.contains('active')) {
                    elements.firewallNodes[0].classList.add('active');
                }
                if (progress >= 40 && !elements.firewallNodes[1].classList.contains('active')) {
                    elements.firewallNodes[1].classList.add('active');
                }
                if (progress >= 50 && !elements.firewallNodes[2].classList.contains('active')) {
                    elements.firewallNodes[2].classList.add('active');
                }
                if (progress >= 60 && !elements.firewallNodes[3].classList.contains('active')) {
                    elements.firewallNodes[3].classList.add('active');
                }
                if (progress >= 70 && !elements.firewallNodes[4].classList.contains('active')) {
                    elements.firewallNodes[4].classList.add('active');
                }

                // Complete decryption
                if (progress >= 100) {
                    clearInterval(interval);
                    setTimeout(() => {
                        startNeuralVerification();
                    }, 1000);
                }
            }, CONFIG.DECRYPTION_DURATION / 100);
        }

        function startNeuralVerification() {
            // Flash effect
            elements.flashOverlay.classList.add('flash');
            setTimeout(() => {
                elements.flashOverlay.classList.remove('flash');
            }, 150);

            // Hide decryption
            elements.decryptionSection.style.transition = 'opacity 0.5s ease';
            elements.decryptionSection.style.opacity = '0';

            setTimeout(() => {
                elements.decryptionSection.style.display = 'none';
                elements.neuralSection.style.display = 'block';

                // Initialize neural visualization
                initNeuralVisualization();

                // Show overlay text
                setTimeout(() => {
                    elements.neuralTitle.classList.add('visible');
                    setTimeout(() => {
                        elements.identityConfirmed.classList.add('visible');
                        setTimeout(() => {
                            elements.nameDisplay.classList.add('visible');
                        }, 1000);
                    }, 2000);
                }, 500);

                // Auto-advance after duration
                setTimeout(() => {
                    completeExperience();
                }, CONFIG.NEURAL_DURATION);
            }, 500);
        }

        // Neural Network Visualization (Replace the current initNeuralVisualization and animateNeural functions)

        // ========== NEURAL NETWORK VISUALIZATION (CodePen: https://codepen.io/towc/pen/wGjXGY) ==========

        function initNeuralVisualization() {
            const c = document.getElementById('neuralCanvas');
            const ctx = c.getContext('2d');

            // Initialize variables as per the original CodePen
            var w = c.width = window.innerWidth,
                h = c.height = window.innerHeight,

                opts = {
                    range: 180,
                    baseConnections: 3,
                    addedConnections: 5,
                    baseSize: 5,
                    minSize: 1,
                    dataToConnectionSize: .4,
                    sizeMultiplier: .7,
                    allowedDist: 40,
                    baseDist: 40,
                    addedDist: 30,
                    connectionAttempts: 100,

                    dataToConnections: 1,
                    baseSpeed: .04,
                    addedSpeed: .05,
                    baseGlowSpeed: .4,
                    addedGlowSpeed: .4,

                    rotVelX: .003,
                    rotVelY: .002,

                    // KEEP ORIGINAL CODE PEN COLORS - DO NOT CHANGE
                    repaintColor: '#111',  // Original dark background
                    connectionColor: 'hsla(200,60%,light%,alp)',  // Original blue
                    rootColor: 'hsla(0,60%,light%,alp)',          // Original red
                    endColor: 'hsla(160,20%,light%,alp)',         // Original green
                    dataColor: 'hsla(40,80%,light%,alp)',         // Original yellow

                    wireframeWidth: .1,
                    wireframeColor: '#88f',  // Original blue wireframe

                    depth: 250,
                    focalLength: 250,
                    vanishPoint: {
                        x: w / 2,
                        y: h / 2
                    }
                },

                squareRange = opts.range * opts.range,
                squareAllowed = opts.allowedDist * opts.allowedDist,
                mostDistant = opts.depth + opts.range,
                sinX = sinY = 0,
                cosX = cosY = 0,

                connections = [],
                toDevelop = [],
                data = [],
                all = [],
                tick = 0,
                totalProb = 0,

                animating = false,

                Tau = Math.PI * 2;

            // Remove the loading text from original code (not needed in your flow)
            // Original had: ctx.fillStyle = '#222'; ctx.fillRect(0,0,w,h); ...
            // We start with a clear canvas matching your theme
            ctx.fillStyle = opts.repaintColor;
            ctx.fillRect(0, 0, w, h);

            // === ORIGINAL CODE STRUCTURE STARTS (slightly modified for integration) ===
            window.setTimeout(init, 4); // to render the loading screen

            function init() {
                connections.length = 0;
                data.length = 0;
                all.length = 0;
                toDevelop.length = 0;

                var connection = new Connection(0, 0, 0, opts.baseSize);
                connection.step = Connection.rootStep;
                connections.push(connection);
                all.push(connection);
                connection.link();

                while (toDevelop.length > 0) {
                    toDevelop[0].link();
                    toDevelop.shift();
                }

                if (!animating) {
                    animating = true;
                    anim();
                }
            }

            function Connection(x, y, z, size) {
                this.x = x;
                this.y = y;
                this.z = z;
                this.size = size;

                this.screen = {};

                this.links = [];
                this.probabilities = [];
                this.isEnd = false;

                this.glowSpeed = opts.baseGlowSpeed + opts.addedGlowSpeed * Math.random();
            }

            Connection.prototype.link = function () {
                if (this.size < opts.minSize)
                    return this.isEnd = true;

                var links = [],
                    connectionsNum = opts.baseConnections + Math.random() * opts.addedConnections | 0,
                    attempt = opts.connectionAttempts,

                    alpha, beta, len,
                    cosA, sinA, cosB, sinB,
                    pos = {},
                    passedExisting, passedBuffered;

                while (links.length < connectionsNum && --attempt > 0) {
                    alpha = Math.random() * Math.PI;
                    beta = Math.random() * Tau;
                    len = opts.baseDist + opts.addedDist * Math.random();

                    cosA = Math.cos(alpha);
                    sinA = Math.sin(alpha);
                    cosB = Math.cos(beta);
                    sinB = Math.sin(beta);

                    pos.x = this.x + len * cosA * sinB;
                    pos.y = this.y + len * sinA * sinB;
                    pos.z = this.z + len * cosB;

                    if (pos.x * pos.x + pos.y * pos.y + pos.z * pos.z < squareRange) {
                        passedExisting = true;
                        passedBuffered = true;
                        for (var i = 0; i < connections.length; ++i)
                            if (squareDist(pos, connections[i]) < squareAllowed)
                                passedExisting = false;

                        if (passedExisting)
                            for (var i = 0; i < links.length; ++i)
                                if (squareDist(pos, links[i]) < squareAllowed)
                                    passedBuffered = false;

                        if (passedExisting && passedBuffered)
                            links.push({ x: pos.x, y: pos.y, z: pos.z });
                    }
                }

                if (links.length === 0)
                    this.isEnd = true;
                else {
                    for (var i = 0; i < links.length; ++i) {
                        var pos = links[i],
                            connection = new Connection(pos.x, pos.y, pos.z, this.size * opts.sizeMultiplier);

                        this.links[i] = connection;
                        all.push(connection);
                        connections.push(connection);
                    }
                    for (var i = 0; i < this.links.length; ++i)
                        toDevelop.push(this.links[i]);
                }
            };

            Connection.prototype.step = function () {
                this.setScreen();
                this.screen.color = (this.isEnd ? opts.endColor : opts.connectionColor).replace('light', 30 + ((tick * this.glowSpeed) % 30)).replace('alp', .2 + (1 - this.screen.z / mostDistant) * .8);

                for (var i = 0; i < this.links.length; ++i) {
                    ctx.moveTo(this.screen.x, this.screen.y);
                    ctx.lineTo(this.links[i].screen.x, this.links[i].screen.y);
                }
            };

            Connection.rootStep = function () {
                this.setScreen();
                this.screen.color = opts.rootColor.replace('light', 30 + ((tick * this.glowSpeed) % 30)).replace('alp', (1 - this.screen.z / mostDistant) * .8);

                for (var i = 0; i < this.links.length; ++i) {
                    ctx.moveTo(this.screen.x, this.screen.y);
                    ctx.lineTo(this.links[i].screen.x, this.links[i].screen.y);
                }
            };

            Connection.prototype.draw = function () {
                ctx.fillStyle = this.screen.color;
                ctx.beginPath();
                ctx.arc(this.screen.x, this.screen.y, this.screen.scale * this.size, 0, Tau);
                ctx.fill();
            };

            function Data(connection) {
                this.glowSpeed = opts.baseGlowSpeed + opts.addedGlowSpeed * Math.random();
                this.speed = opts.baseSpeed + opts.addedSpeed * Math.random();

                this.screen = {};

                this.setConnection(connection);
            }

            Data.prototype.reset = function () {
                this.setConnection(connections[0]);
                this.ended = 2;
            };

            Data.prototype.step = function () {
                this.proportion += this.speed;

                if (this.proportion < 1) {
                    this.x = this.ox + this.dx * this.proportion;
                    this.y = this.oy + this.dy * this.proportion;
                    this.z = this.oz + this.dz * this.proportion;
                    this.size = (this.os + this.ds * this.proportion) * opts.dataToConnectionSize;
                } else
                    this.setConnection(this.nextConnection);

                this.screen.lastX = this.screen.x;
                this.screen.lastY = this.screen.y;
                this.setScreen();
                this.screen.color = opts.dataColor.replace('light', 40 + ((tick * this.glowSpeed) % 50)).replace('alp', .2 + (1 - this.screen.z / mostDistant) * .6);
            };

            Data.prototype.draw = function () {
                if (this.ended)
                    return --this.ended; // not sure why the thing lasts 2 frames, but it does

                ctx.beginPath();
                ctx.strokeStyle = this.screen.color;
                ctx.lineWidth = this.size * this.screen.scale;
                ctx.moveTo(this.screen.lastX, this.screen.lastY);
                ctx.lineTo(this.screen.x, this.screen.y);
                ctx.stroke();
            };

            Data.prototype.setConnection = function (connection) {
                if (connection.isEnd)
                    this.reset();
                else {
                    this.connection = connection;
                    this.nextConnection = connection.links[connection.links.length * Math.random() | 0];

                    this.ox = connection.x; // original coordinates
                    this.oy = connection.y;
                    this.oz = connection.z;
                    this.os = connection.size; // base size

                    this.nx = this.nextConnection.x; // new
                    this.ny = this.nextConnection.y;
                    this.nz = this.nextConnection.z;
                    this.ns = this.nextConnection.size;

                    this.dx = this.nx - this.ox; // delta
                    this.dy = this.ny - this.oy;
                    this.dz = this.nz - this.oz;
                    this.ds = this.ns - this.os;

                    this.proportion = 0;
                }
            };

            Connection.prototype.setScreen = Data.prototype.setScreen = function () {
                var x = this.x,
                    y = this.y,
                    z = this.z;

                // apply rotation on X axis
                var Y = y;
                y = y * cosX - z * sinX;
                z = z * cosX + Y * sinX;

                // rot on Y
                var Z = z;
                z = z * cosY - x * sinY;
                x = x * cosY + Z * sinY;

                this.screen.z = z;

                // translate on Z
                z += opts.depth;

                this.screen.scale = opts.focalLength / z;
                this.screen.x = opts.vanishPoint.x + x * this.screen.scale;
                this.screen.y = opts.vanishPoint.y + y * this.screen.scale;
            };

            function squareDist(a, b) {
                var x = b.x - a.x,
                    y = b.y - a.y,
                    z = b.z - a.z;

                return x * x + y * y + z * z;
            }

            function anim() {
                // Only animate if the neural section is visible
                if (!animating || elements.neuralSection.style.display !== 'block') {
                    return;
                }

                window.requestAnimationFrame(anim);

                ctx.globalCompositeOperation = 'source-over';
                ctx.fillStyle = opts.repaintColor;
                ctx.fillRect(0, 0, w, h);

                ++tick;

                var rotX = tick * opts.rotVelX,
                    rotY = tick * opts.rotVelY;

                cosX = Math.cos(rotX);
                sinX = Math.sin(rotX);
                cosY = Math.cos(rotY);
                sinY = Math.sin(rotY);

                if (data.length < connections.length * opts.dataToConnections) {
                    var datum = new Data(connections[0]);
                    data.push(datum);
                    all.push(datum);
                }

                ctx.globalCompositeOperation = 'lighter';
                ctx.beginPath();
                ctx.lineWidth = opts.wireframeWidth;
                ctx.strokeStyle = opts.wireframeColor;
                all.map(function (item) { item.step(); });
                ctx.stroke();
                ctx.globalCompositeOperation = 'source-over';
                all.sort(function (a, b) { return b.screen.z - a.screen.z; });
                all.map(function (item) { item.draw(); });
            }

            // Modified resize handler for your page
            const neuralResizeHandler = function () {
                // Update canvas dimensions
                w = c.width = window.innerWidth;
                h = c.height = window.innerHeight;

                // Update vanish point
                opts.vanishPoint.x = w / 2;
                opts.vanishPoint.y = h / 2;

                // Redraw background
                ctx.fillStyle = opts.repaintColor;
                ctx.fillRect(0, 0, w, h);
            };

            // Add the neural network's resize handler to your existing window resize listener
            // You'll need to add this line to your existing window resize event handler:
            // neuralResizeHandler();

            // === ORIGINAL CODE STRUCTURE ENDS ===

            // Store the resize handler so it can be called from your main resize function
            window.neuralResizeHandler = neuralResizeHandler;

            // Start the animation immediately (modified from original which waited for click)
            init();
        }

        // This function is no longer needed as animation is handled within initNeuralVisualization
        function animateNeural() {
            // Empty function - animation is handled by the neural network's own anim() function
        }

        function completeExperience() {
            // Flash effect
            elements.flashOverlay.classList.add('flash');
            setTimeout(() => {
                elements.flashOverlay.classList.remove('flash');

                // Add final message
                const finalMessage = document.createElement('div');
                finalMessage.style.position = 'fixed';
                finalMessage.style.top = '50%';
                finalMessage.style.left = '50%';
                finalMessage.style.transform = 'translate(-50%, -50%)';
                finalMessage.style.color = '#3eff3e';
                finalMessage.style.fontSize = '2em';
                finalMessage.style.textAlign = 'center';
                finalMessage.style.zIndex = '300';
                finalMessage.style.textShadow = '0 0 20px #3eff3e';
                finalMessage.style.background = 'rgba(0, 0, 0, 0.8)';
                finalMessage.style.padding = '40px 60px';
                finalMessage.style.borderRadius = '10px';
                finalMessage.style.border = '2px solid #3fefef';
                finalMessage.style.boxShadow = '0 0 50px rgba(63, 239, 239, 0.3)';
                finalMessage.innerHTML = `
            <div style="margin-bottom: 30px; font-size: 1.5em;">ACCESS COMPLETE</div>
            <div style="margin-bottom: 20px; font-size: 3em; font-weight: bold; color: #3fefef;">ZAARGULL</div>
            <div style="font-size: 0.8em; color: #3fefef; letter-spacing: 2px;">SECURITY CLEARANCE: MAXIMUM</div>
            <div style="margin-top: 20px; font-size: 0.6em; color: #00ffaa;">System Ready - All Protocols Verified</div>
        `;
                document.body.appendChild(finalMessage);

                // Add restart button
                const restartButton = document.createElement('button');
                restartButton.innerHTML = 'RESTART EXPERIENCE';
                restartButton.style.position = 'fixed';
                restartButton.style.bottom = '50px';
                restartButton.style.left = '50%';
                restartButton.style.transform = 'translateX(-50%)';
                restartButton.style.padding = '15px 30px';
                restartButton.style.background = 'transparent';
                restartButton.style.color = '#3fefef';
                restartButton.style.border = '2px solid #3fefef';
                restartButton.style.borderRadius = '5px';
                restartButton.style.fontSize = '1em';
                restartButton.style.cursor = 'pointer';
                restartButton.style.zIndex = '300';
                restartButton.style.textTransform = 'uppercase';
                restartButton.style.letterSpacing = '2px';
                restartButton.style.transition = 'all 0.3s';
                restartButton.onmouseover = () => {
                    restartButton.style.background = '#3fefef';
                    restartButton.style.color = '#000';
                    restartButton.style.boxShadow = '0 0 20px #3fefef';
                };
                restartButton.onmouseout = () => {
                    restartButton.style.background = 'transparent';
                    restartButton.style.color = '#3fefef';
                    restartButton.style.boxShadow = 'none';
                };
                restartButton.onclick = () => {
                    location.reload();
                };
                document.body.appendChild(restartButton);

                console.log("Experience complete! Access granted to Zaargull.");
            }, 150);
        }

        // Handle window resize
        window.addEventListener('resize', () => {
            // Resize hex matrix
            if (hexMatrixCtx) {
                hexMatrixWidth = elements.hexMatrix.width = window.innerWidth;
                hexMatrixHeight = elements.hexMatrix.height = window.innerHeight;
            }

            // Resize neural visualization (calls the neural network's exact resize handler)
            if (window.neuralResizeHandler) {
                window.neuralResizeHandler();
            }
        });

        // Add to your elements object
        elements.personnelSection = document.getElementById('personnel-section');

        // Update completeExperience function
        function completeExperience() {
            // Flash effect
            elements.flashOverlay.classList.add('flash');
            setTimeout(() => {
                elements.flashOverlay.classList.remove('flash');

                // Hide neural section
                elements.neuralSection.style.opacity = '0';
                setTimeout(() => {
                    elements.neuralSection.style.display = 'none';

                    // Show personnel section
                    elements.personnelSection.style.display = 'block';
                    setTimeout(() => {
                        elements.personnelSection.style.opacity = '1';

                        // Initialize personnel data
                        initializePersonnelData();
                    }, 100);
                }, 500);
            }, 150);
        }

        // Initialize personnel data
        function initializePersonnelData() {
            // Personal data (customize these!)
            const personData = {
                name: "ZAARGULL",
                dob: "2003-02-10", // Change to actual birthday
                clearance: "OMEGA-9",
                traits: {
                    intelligence: 94,
                    loyalty: 98,
                    humor: 88,
                    creativity: 92
                }
            };

            // Calculate age
            const dob = new Date(personData.dob);
            const today = new Date();
            let age = today.getFullYear() - dob.getFullYear();
            const m = today.getMonth() - dob.getMonth();
            if (m < 0 || (m === 0 && today.getDate() < dob.getDate())) {
                age--;
            }

            // Check if today is birthday
            const isBirthday = today.getMonth() === dob.getMonth() && today.getDate() === dob.getDate();

            // Update DOM elements
            document.getElementById('data-name').textContent = personData.name;
            document.getElementById('data-age').textContent = `${age} YEARS`;
            document.getElementById('data-dob').textContent = personData.dob;
            document.getElementById('data-clearance').textContent = personData.clearance;

            // Birthday status
            const birthdayElement = document.getElementById('data-birthday');
            const birthdayIcon = document.querySelector('.birthday-indicator');

            if (isBirthday) {
                birthdayElement.textContent = "BIRTHDAY ACTIVE üéâ";
                birthdayElement.style.color = "#3eff3e";
                birthdayElement.style.textShadow = "0 0 10px #3eff3e";
                birthdayIcon.style.display = 'block';

                // Add celebration effect
                document.querySelector('.birthday-icon').style.animation = 'float 1.5s infinite ease-in-out';
                document.querySelector('.pulse-ring').style.animation = 'pulse-ring 1s infinite';
            } else {
                birthdayElement.textContent = "BIRTHDAY INACTIVE";
                birthdayElement.style.color = "#8f9f8f";
                birthdayIcon.style.display = 'none';
            }

            // Update timestamp
            function updateTimestamp() {
                const now = new Date();
                const timeString = now.toISOString().replace('T', ' ').substring(0, 19);
                document.getElementById('current-time').textContent = timeString + ' UTC';
            }

            updateTimestamp();
            setInterval(updateTimestamp, 1000);

            // Button event listeners - IMPORTANT: UPDATED CELEBRATE BUTTON

            document.getElementById('celebrate-btn').addEventListener('click', () => {
                // Change button text to show it's working
                const celebrateBtn = document.getElementById('celebrate-btn');
                celebrateBtn.textContent = "ACTIVATING...";
                celebrateBtn.disabled = true;

                // Celebration animation
                const confetti = document.createElement('div');
                confetti.style.position = 'fixed';
                confetti.style.top = '0';
                confetti.style.left = '0';
                confetti.style.width = '100%';
                confetti.style.height = '100%';
                confetti.style.pointerEvents = 'none';
                confetti.style.zIndex = '9999';
                document.body.appendChild(confetti);

                // Create falling particles
                for (let i = 0; i < 100; i++) {
                    const particle = document.createElement('div');
                    particle.style.position = 'absolute';
                    particle.style.width = '10px';
                    particle.style.height = '10px';
                    particle.style.background = ['#3fefef', '#3eff3e', '#00ffaa'][Math.floor(Math.random() * 3)];
                    particle.style.borderRadius = '50%';
                    particle.style.left = Math.random() * 100 + 'vw';
                    particle.style.top = '-10px';
                    particle.style.boxShadow = '0 0 10px currentColor';
                    confetti.appendChild(particle);

                    // Animation
                    particle.animate([
                        { transform: 'translateY(0) rotate(0deg)', opacity: 1 },
                        { transform: `translateY(${window.innerHeight}px) rotate(${Math.random() * 360}deg)`, opacity: 0 }
                    ], {
                        duration: 2000 + Math.random() * 2000,
                        easing: 'cubic-bezier(0.215, 0.61, 0.355, 1)'
                    });
                }

                // After celebration, transition to mission briefing
                setTimeout(() => {
                    confetti.remove();
                    celebrateBtn.textContent = "PROCEEDING...";

                    // Transition to mission briefing
                    transitionToMissionBriefing();
                }, 3500);
            });
        }

        // Function to transition from personnel to mission briefing
        function transitionToMissionBriefing() {
            // Hide personnel section
            elements.personnelSection.style.opacity = '0';
            setTimeout(() => {
                elements.personnelSection.style.display = 'none';

                // Show mission briefing
                elements.missionSection.style.display = 'block';
                setTimeout(() => {
                    elements.missionSection.style.opacity = '1';

                    // Start mission countdown timer
                    startCountdown();
                }, 100);
            }, 500);
        }


        // ========== MISSION BRIEFING FUNCTIONS ==========

        // Add to your elements object
        elements.missionSection = document.getElementById('mission-section');

        // Set the target birthday date (UPDATE THIS WITH ACTUAL BIRTHDAY)
        const BIRTHDAY_DATE = new Date('2003-02-10'); // Change to actual birthday

        // Update the completeExperience function to show mission briefing
        function completeExperience() {
            // Flash effect
            elements.flashOverlay.classList.add('flash');
            setTimeout(() => {
                elements.flashOverlay.classList.remove('flash');

                // Hide neural section
                elements.neuralSection.style.opacity = '0';
                setTimeout(() => {
                    elements.neuralSection.style.display = 'none';

                    // Show PERSONNEL FILE first
                    elements.personnelSection.style.display = 'block';
                    setTimeout(() => {
                        elements.personnelSection.style.opacity = '1';

                        // Initialize personnel data
                        initializePersonnelData();

                        // REMOVED: setupMissionTransition();
                        // We'll use the celebration button instead
                    }, 100);
                }, 500);
            }, 150);
        }

        // New function to handle transition to mission briefing
        function setupMissionTransition() {
            // Option 1: Automatic transition after delay (10 seconds)
            setTimeout(() => {
                transitionToMissionBriefing();
            }, 10000); // 10 seconds

            // Option 2: Add a "Next" button to personnel file
            const nextButton = document.createElement('button');
            nextButton.textContent = 'PROCEED TO MISSION BRIEFING';
            nextButton.className = 'cyber-btn primary';
            nextButton.style.marginTop = '20px';
            nextButton.style.display = 'block';
            nextButton.style.marginLeft = 'auto';
            nextButton.style.marginRight = 'auto';

            // Add button to personnel file footer
            const footer = document.querySelector('.file-footer');
            if (footer) {
                footer.appendChild(nextButton);
                nextButton.addEventListener('click', transitionToMissionBriefing);
            }
        }

        // Function to transition from personnel to mission briefing
        function transitionToMissionBriefing() {
            // Hide personnel section
            elements.personnelSection.style.opacity = '0';
            setTimeout(() => {
                elements.personnelSection.style.display = 'none';

                // Show mission briefing
                elements.missionSection.style.display = 'block';
                setTimeout(() => {
                    elements.missionSection.style.opacity = '1';

                    // Start mission countdown timer
                    startCountdown();

                    // Initialize mission objectives lock system
                    initializeMissionObjectives();
                }, 100);
            }, 500);
        }

        // Countdown Timer Function
        function startCountdown() {
            const daysElement = document.getElementById('days');
            const hoursElement = document.getElementById('hours');
            const minutesElement = document.getElementById('minutes');
            const secondsElement = document.getElementById('seconds');

            function updateCountdown() {
                const now = new Date();

                // Set next birthday
                const currentYear = now.getFullYear();
                let nextBirthday = new Date(
                    currentYear,
                    BIRTHDAY_DATE.getMonth(),
                    BIRTHDAY_DATE.getDate()
                );

                // If birthday already passed this year, set to next year
                if (now > nextBirthday) {
                    nextBirthday.setFullYear(currentYear + 1);
                }

                // Calculate time difference
                const diff = nextBirthday - now;

                // Calculate days, hours, minutes, seconds
                const days = Math.floor(diff / (1000 * 60 * 60 * 24));
                const hours = Math.floor((diff % (1000 * 60 * 60 * 24)) / (1000 * 60 * 60));
                const minutes = Math.floor((diff % (1000 * 60 * 60)) / (1000 * 60));
                const seconds = Math.floor((diff % (1000 * 60)) / 1000);

                // Update display
                daysElement.textContent = String(days).padStart(2, '0');
                hoursElement.textContent = String(hours).padStart(2, '0');
                minutesElement.textContent = String(minutes).padStart(2, '0');
                secondsElement.textContent = String(seconds).padStart(2, '0');

                // Add animation when numbers change
                [daysElement, hoursElement, minutesElement, secondsElement].forEach(el => {
                    el.classList.add('changing');
                    setTimeout(() => el.classList.remove('changing'), 300);
                });

                // Check if it's birthday today
                if (days === 0 && hours === 0 && minutes === 0 && seconds < 10) {
                    // Birthday countdown celebration
                    celebrateBirthdayCountdown(seconds);
                }
            }

            // Update immediately and every second
            updateCountdown();
            const countdownInterval = setInterval(updateCountdown, 1000);

            // Store interval for cleanup
            window.countdownInterval = countdownInterval;
        }



        // Close confirmation
        function closeConfirmation() {
            const modals = document.querySelectorAll('.confirmation-box');
            modals.forEach(modal => modal.remove());
        }

        // Birthday celebration animation
        function celebrateBirthdayCountdown(secondsLeft) {
            if (secondsLeft === 9) { // Start at 10 seconds
                // Add celebration effects
                const missionTerminal = document.querySelector('.mission-terminal');

                // Add pulsing animation
                missionTerminal.style.animation = 'none';
                setTimeout(() => {
                    missionTerminal.style.animation = 'terminal-pulse 0.5s infinite alternate';
                }, 10);

                // Add particles
                for (let i = 0; i < 20; i++) {
                    createBirthdayParticle();
                }

                // Play sound if available
                playCountdownBeep();
            }
        }

        // Create birthday particle
        function createBirthdayParticle() {
            const particle = document.createElement('div');
            particle.style.position = 'fixed';
            particle.style.width = '20px';
            particle.style.height = '20px';
            particle.innerHTML = ['üéÇ', 'üéâ', 'üéÅ', '‚ú®'][Math.floor(Math.random() * 4)];
            particle.style.fontSize = '20px';
            particle.style.zIndex = '9999';
            particle.style.pointerEvents = 'none';
            particle.style.left = Math.random() * 100 + 'vw';
            particle.style.top = '100vh';
            document.body.appendChild(particle);

            // Animate
            particle.animate([
                { transform: 'translateY(0) rotate(0deg)', opacity: 1 },
                { transform: `translateY(-${window.innerHeight + 100}px) rotate(${Math.random() * 360}deg)`, opacity: 0 }
            ], {
                duration: 2000 + Math.random() * 3000,
                easing: 'cubic-bezier(0.215, 0.61, 0.355, 1)'
            });

            // Remove after animation
            setTimeout(() => particle.remove(), 5000);
        }

        // Add CSS for particle animation
        const style = document.createElement('style');
        style.textContent = `
    @keyframes terminal-pulse {
        from { box-shadow: 0 0 80px rgba(63, 239, 239, 0.4); }
        to { box-shadow: 0 0 120px rgba(63, 239, 239, 0.8), 0 0 200px rgba(0, 255, 170, 0.3); }
    }
    
    .changing {
        animation: number-change 0.3s ease-out;
    }
    
    @keyframes number-change {
        0% { transform: scale(1); }
        50% { transform: scale(1.2); color: #00ffaa; }
        100% { transform: scale(1); }
    }
    
    @keyframes blink-cursor {
        0%, 100% { opacity: 1; }
        50% { opacity: 0; }
    }
    
    @keyframes pulse {
        0% { opacity: 1; }
        50% { opacity: 0.5; }
        100% { opacity: 1; }
    }
`;
        document.head.appendChild(style);

        // Play countdown beep sound
        function playCountdownBeep() {
            // Create audio context for beep sound
            try {
                const audioContext = new (window.AudioContext || window.webkitAudioContext)();
                const oscillator = audioContext.createOscillator();
                const gainNode = audioContext.createGain();

                oscillator.connect(gainNode);
                gainNode.connect(audioContext.destination);

                oscillator.frequency.value = 800;
                oscillator.type = 'sine';

                gainNode.gain.setValueAtTime(0.1, audioContext.currentTime);
                gainNode.gain.exponentialRampToValueAtTime(0.01, audioContext.currentTime + 0.5);

                oscillator.start(audioContext.currentTime);
                oscillator.stop(audioContext.currentTime + 0.5);
            } catch (e) {
                console.log("Audio not supported");
            }
        }

        // Cleanup function
        function cleanupMission() {
            if (window.countdownInterval) {
                clearInterval(window.countdownInterval);
            }
        }

        // ========== MISSION OBJECTIVES LOCK SYSTEM ==========

        const missionState = {
            objective1: { unlocked: true, completed: false, world: "celebration_world" }, // Start unlocked
            objective2: { unlocked: false, completed: false, world: "message_world" },
            objective3: { unlocked: false, completed: false, world: "gift_world" },
            objective4: { unlocked: false, completed: false, world: "cake_world" }
        };

        // Initialize mission objectives
        function initializeMissionObjectives() {
            const objectives = document.querySelectorAll('.cyber-list li');

            objectives.forEach((obj, index) => {
                const objectiveNumber = index + 1;
                const state = missionState[`objective${objectiveNumber}`];

                // Add click handler
                obj.addEventListener('click', () => {
                    if (state.unlocked) {
                        enterWorld(state.world);
                    } else if (!state.unlocked) {
                        showLockedMessage(objectiveNumber);
                    }
                });

                // Update visual state
                updateObjectiveVisual(obj, state, objectiveNumber);
            });

            // Update the bottom progress tracker
            updateProgressTracker();
        }

        // Update the function to prevent duplicate icons
        function updateObjectiveVisual(element, state, number) {
            // Remove any existing icons first
            const text = element.textContent.replace(/[üîìüîí‚úÖ]/g, '').trim();
            element.textContent = text;

            if (state.completed) {
                element.innerHTML += ' ‚úÖ';
                element.style.opacity = '0.7';
                element.style.cursor = 'pointer';
                element.classList.remove('pulse-unlocked');
            } else if (state.unlocked) {
                element.innerHTML += ' üîì';
                element.style.cursor = 'pointer';
                element.classList.add('pulse-unlocked');
            } else {
                element.innerHTML += ' üîí';
                element.style.opacity = '0.5';
                element.style.cursor = 'not-allowed';
                element.classList.add('objective-locked');
            }
        }

        // Update the bottom progress tracker visually
        function updateProgressTracker() {
            const steps = document.querySelectorAll('.step');
            const fillBar = document.getElementById('bottom-progress-fill');
            let completedCount = 0;
            let currentUnlocked = 1;

            for (let i = 1; i <= 4; i++) {
                const state = missionState[`objective${i}`];
                if (state.completed) completedCount++;
                if (state.unlocked && !state.completed && currentUnlocked === 1) {
                    currentUnlocked = i; // Finds the highest unlocked uncompleted
                }
            }
            // Better logic: current active is the first unlocked & uncompleted
            currentUnlocked = 1;
            for (let i = 1; i <= 4; i++) {
                const state = missionState[`objective${i}`];
                if (state.unlocked && !state.completed) {
                    currentUnlocked = i;
                    break;
                }
            }
            if (completedCount === 4) currentUnlocked = 5; // All done

            steps.forEach((step, index) => {
                const stepNum = index + 1;
                step.classList.remove('active', 'completed');

                if (stepNum <= completedCount) {
                    step.classList.add('completed');
                    step.innerHTML = '‚úì';
                } else if (stepNum === currentUnlocked) {
                    step.classList.add('active');
                    step.innerHTML = stepNum;
                } else {
                    step.innerHTML = stepNum;
                }
            });

            let percentage = 0;
            if (completedCount === 1) percentage = 33;
            else if (completedCount === 2) percentage = 66;
            else if (completedCount >= 3) percentage = 100;

            if (fillBar) {
                fillBar.style.width = percentage + '%';
            }
        }
        // Enter world function
        function enterWorld(world) {
            const urls = {
                'celebration_world': 'celebration.html',
                'gift_world': 'gift.html',
                'message_world': 'wishes.html',
                'cake_world': '#'
            };

            if (urls[world] && urls[world] !== '#') {
                const message = document.createElement('div');
                message.className = 'confirmation-box';
                message.style.background = 'rgba(0, 20, 40, 0.95)';
                message.style.border = '2px solid #3fefef';
                message.innerHTML = `
                    <h2>‚ö° ENTERING WORLD ‚ö°</h2>
                    <p style="font-size: 1.3em; color: #00ffaa; margin: 20px 0; letter-spacing: 2px;">${world.replace(/_/g, ' ').toUpperCase()}</p>
                    <div class="mission-progress">
                        <div class="progress-text">INITIALIZING...</div>
                        <div class="progress-bar">
                            <div class="progress-fill" id="world-progress"></div>
                        </div>
                    </div>
                    <p style="font-size: 0.8em; color: #8f9f8f; margin-top: 20px;">Establishing secure connection...</p>
                `;
                document.body.appendChild(message);
                message.style.display = 'block';

                setTimeout(() => {
                    const progressFill = document.getElementById('world-progress');
                    if (progressFill) progressFill.style.width = '100%';
                    setTimeout(() => {
                        window.location.href = urls[world];
                    }, 1500);
                }, 100);
            } else {
                // Cake world (not built) or fallback
                const message = document.createElement('div');
                message.className = 'confirmation-box';
                message.style.background = 'rgba(0, 20, 40, 0.95)';
                message.style.border = '2px solid #3fefef';
                message.innerHTML = `
                    <h2>‚ö° ENTERING WORLD ‚ö°</h2>
                    <p style="font-size: 1.3em; color: #00ffaa; margin: 20px 0; letter-spacing: 2px;">${world.replace(/_/g, ' ').toUpperCase()}</p>
                    <div class="mission-progress">
                        <div class="progress-text">INITIALIZING...</div>
                        <div class="progress-bar">
                            <div class="progress-fill" id="world-progress"></div>
                        </div>
                    </div>
                    <p style="font-size: 0.8em; color: #8f9f8f; margin-top: 20px;">Loading immersive experience...</p>
                `;
                document.body.appendChild(message);

                setTimeout(() => {
                    const progressFill = document.getElementById('world-progress');
                    if (progressFill) {
                        progressFill.style.width = '100%';

                        // Complete world entry
                        setTimeout(() => {
                            message.innerHTML = `
                                <h2>‚úÖ WORLD LOADED</h2>
                                <p>Exploring: <span style="color: #00ffaa;">${world.replace(/_/g, ' ').toUpperCase()}</span></p>
                                <p style="margin-top: 20px; color: #8f9f8f; font-size: 0.9em;">This is where the interactive world content will appear!</p>
                                <button class="mission-btn" onclick="completeObjective('${world}')">COMPLETE OBJECTIVE</button>
                                <button class="mission-btn" style="background: transparent; margin-top: 10px;" onclick="closeConfirmation()">RETURN</button>
                            `;
                        }, 2000);
                    }
                }, 100);
            }
        }

        // Show locked message
        function showLockedMessage(objectiveNumber) {
            const message = document.createElement('div');
            message.className = 'confirmation-box';
            message.style.background = 'rgba(40, 20, 0, 0.95)';
            message.style.border = '2px solid #ff6b6b';
            message.innerHTML = `
                <h2>üîí OBJECTIVE LOCKED</h2>
                <p>Objective ${objectiveNumber} is currently locked.</p>
                <p style="color: #ffaa00; margin-top: 20px;">Complete the previous objectives to unlock this world.</p>
                <button class="mission-btn" onclick="closeConfirmation()" style="margin-top: 20px;">UNDERSTOOD</button>
            `;
            document.body.appendChild(message);

            setTimeout(() => {
                message.style.display = 'block';
            }, 100);
        }

        // Complete objective function
        function completeObjective(world) {
            // Find which objective this is
            for (const [key, state] of Object.entries(missionState)) {
                if (state.world === world) {
                    state.completed = true;

                    // Unlock next objective
                    const nextKey = `objective${parseInt(key.replace('objective', '')) + 1}`;
                    if (missionState[nextKey]) {
                        missionState[nextKey].unlocked = true;
                    }

                    break;
                }
            }

            // Show completion message
            const message = document.createElement('div');
            message.className = 'confirmation-box';
            message.innerHTML = `
                <h2>üéâ OBJECTIVE COMPLETE!</h2>
                <p>World exploration successful!</p>
                <p style="color: #00ffaa; margin-top: 20px; font-size: 1.1em;">Unlocking next world...</p>
            `;
            document.body.appendChild(message);

            setTimeout(() => {
                message.remove();
                closeConfirmation();

                // Refresh objectives display
                initializeMissionObjectives();
                localStorage.setItem('birthday_mission_state_v3', JSON.stringify(missionState));
            }, 2000);
        }

        // Initialize experience with URL params and state
        function initExperience() {
            const urlParams = new URLSearchParams(window.location.search);
            const completedObj = urlParams.get('completed');

            // Load saved state
            let savedState = localStorage.getItem('birthday_mission_state_v3');
            if (savedState) {
                Object.assign(missionState, JSON.parse(savedState));
            }

            if (completedObj) {
                // Find which objective this is
                for (const [key, state] of Object.entries(missionState)) {
                    if (state.world === completedObj) {
                        state.completed = true;

                        // Standard forward logic:
                        const nextNum = parseInt(key.replace('objective', '')) + 1;
                        if (missionState[`objective${nextNum}`]) {
                            missionState[`objective${nextNum}`].unlocked = true;
                        }

                        break;
                    }
                }
                localStorage.setItem('birthday_mission_state_v3', JSON.stringify(missionState));
            }

            if (urlParams.get('skip') === 'true' || completedObj) {
                // Skip directly to mission section
                elements.terminalSection.style.display = 'none';
                elements.scannerSection.style.display = 'none';
                elements.decryptionSection.style.display = 'none';
                elements.neuralSection.style.display = 'none';
                if (elements.personnelSection) elements.personnelSection.style.display = 'none';

                if (elements.missionSection) {
                    elements.missionSection.style.display = 'block';
                    elements.missionSection.style.opacity = '1';
                }

                startCountdown();
                initializeMissionObjectives();
            } else {
                displayTerminalSequence();
            }
        }

        window.onload = initExperience;
    </script>
</body>

</html>
